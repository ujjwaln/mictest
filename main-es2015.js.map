{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/mic-manager.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { ChangeDetectorRef, Component } from '@angular/core';\nimport { MicManagerService } from './mic-manager.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'ngmictest';\n  public indices = [];\n  public pathDValues = [];\n  public isRecording = false;\n  public isAudioPlaying = false;\n  public isAudioPaused = false;\n  private timer: any;\n  private audioPlayer: any;\n  public audioPlayerActive: boolean;\n  public audioUrl: string;\n  constructor(private micManagerService: MicManagerService, private cd: ChangeDetectorRef) {\n    let i = 0;\n    while (i < 255) {\n      this.indices.push(i++);\n    }\n    this.micManagerService.recordedAudioUrl$.subscribe((audioUrl: string) => {\n      this.audioPlayer = new Audio(audioUrl);\n      this.audioPlayerActive = true;\n      this.audioUrl = audioUrl;\n    });\n    this.audioPlayerActive = false;\n  }\n  getPathD(i): string {\n    if (this.pathDValues.length > i) {\n      return this.pathDValues[i];\n    }\n  }\n  doDraw() {\n    requestAnimationFrame(this.doDraw.bind(this));\n    const analyser = this.micManagerService.getAnalyser();\n    const frequencyArray = new Uint8Array(analyser.frequencyBinCount);\n    analyser.getByteFrequencyData(frequencyArray);\n    let adjustedLength;\n    for (let i = 0; i < 255; i++) {\n      adjustedLength = Math.floor(frequencyArray[i]) - (Math.floor(frequencyArray[i]) % 5);\n      this.pathDValues[i] = 'M ' + (i) + ',255 l 0,-' + adjustedLength;\n    }\n    this.cd.detectChanges();\n  }\n  micNotAllowed(error: any) {\n  }\n  startTest() {\n    const self = this;\n    this.audioPlayerActive = false;\n    navigator.getUserMedia({audio: true}, (stream: MediaStream) => {\n      this.startRecording(stream);\n    }, error => {\n      this.isRecording = false;\n    });\n  }\n  startRecording(stream: MediaStream) {\n    this.isRecording = true;\n    this.micManagerService.startRecording(stream);\n    this.doDraw();\n    // if (this.timer) {\n    //   clearTimeout(this.timer);\n    //   this.timer = null;\n    // }\n    // this.timer = setTimeout(this.stopTest.bind(this), 2500);\n  }\n  stopTest() {\n    // if (this.timer) {\n    //   clearTimeout(this.timer);\n    //   this.timer = null;\n    // }\n    this.micManagerService.stopRecording();\n    this.isRecording = false;\n  }\n  play() {\n    this.audioPlayer.play();\n    this.isAudioPlaying = true;\n    this.isAudioPaused = false;\n  }\n  pause() {\n    this.audioPlayer.pause();\n    this.isAudioPlaying = false;\n    this.isAudioPaused = true;\n  }\n  cancel() {\n    this.audioPlayerActive = false;\n    this.isAudioPlaying = false;\n    this.isAudioPaused = false;\n  }\n}\n","<div class=\"app-container\">\n  <div fxLayout=\"column\">\n    <div fxLayout=\"row\" fxFlexFill fxLayoutAlign=\"center center\">\n      <h1 style=\"color: forestgreen; font-family: architects_daughterregular; font-size:96px; margin-top: 120px; margin-bottom: 120px\">Sound the best</h1>\n    </div>\n\n    <div fxLayout=\"row\" fxFlexFill fxLayoutAlign=\"center center\">\n      <div class=\"app-content\" *ngIf=\"!audioPlayerActive\">\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\">\n          <button *ngIf=\"!isRecording\" mat-raised-button color=\"accent\" aria-label=\"Start Mic Test\"\n                  (click)=\"startTest()\">\n            Record Audio\n          </button>\n          <button *ngIf=\"isRecording\" mat-raised-button color=\"warn\" aria-label=\"Stop Mic Test\" (click)=\"stopTest()\">\n            Stop Recording\n          </button>\n          <mat-progress-spinner style=\"margin-left: 12px\" *ngIf=\"isRecording\" mode=\"indeterminate\" diameter=\"24\"></mat-progress-spinner>\n        </div>\n      </div>\n    </div>\n\n    <div fxLayout=\"row\" fxFlexFill fxLayoutAlign=\"center center\">\n      <div id=\"micTestDisplay\" [hidden]=\"!isRecording\">\n        <!--https://codepen.io/zapplebee/pen/gbNbZE -->\n        <svg preserveAspectRatio=\"none\" id=\"audioVisualizer\" version=\"1.1\"\n             xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 255 255\"\n             xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n          <defs>\n            <mask id=\"audioMask\">\n              <g id=\"maskGroup\">\n                <path xmlns=\"http://www.w3.org/2000/svg\"\n                      *ngFor=\"let i of indices\" stroke-dasharray=\"4,1\" [attr.d]=\"getPathD(i)\">\n                </path>\n              </g>\n            </mask>\n            <linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n              <stop offset=\"0%\" style=\"stop-color:#ff0a0a;stop-opacity:1\"/>\n              <stop offset=\"20%\" style=\"stop-color:#f1ff0a;stop-opacity:1\"/>\n              <stop offset=\"90%\" style=\"stop-color:#d923b9;stop-opacity:1\"/>\n              <stop offset=\"100%\" style=\"stop-color:#050d61;stop-opacity:1\"/>\n            </linearGradient>\n          </defs>\n          <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#gradient)\"\n                mask=\"url(#audioMask)\"></rect>\n        </svg>\n      </div>\n    </div>\n\n    <div fxLayout=\"row\" fxFlexFill fxLayoutAlign=\"center center\">\n      <div class=\"audio-player\" *ngIf=\"audioPlayerActive\">\n        <mat-toolbar color=\"primary\">\n          <button (click)=\"play()\" color=\"accent\" mat-raised-button>\n            <mat-icon>play_circle_filled</mat-icon> Play\n          </button>\n          <button mat-button (click)=\"pause()\" color=\"accent\">\n            <mat-icon>stop</mat-icon> Pause\n          </button>\n          <button mat-button (click)=\"cancel()\" color=\"accent\"  *ngIf=\"isAudioPlaying\">\n            <mat-icon>done</mat-icon> Done\n          </button>\n          <mat-progress-spinner mode=\"indeterminate\" diameter=\"24\" color=\"accent\" *ngIf=\"isAudioPlaying\"></mat-progress-spinner>\n        </mat-toolbar>\n      </div>\n    </div>\n\n    <div class=\"footer\">\n      <span>Recorded audio stays your device, your privacy is <b>completely protected</b></span>\n    </div>\n\n  </div>\n</div>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { LayoutModule } from '@angular/cdk/layout';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatCardModule } from '@angular/material/card';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport {MatProgressSpinnerModule} from \"@angular/material/progress-spinner\";\n\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    LayoutModule,\n    MatToolbarModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatIconModule,\n    MatListModule,\n    MatCardModule,\n    FlexLayoutModule,\n    MatProgressSpinnerModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MicManagerService {\n  private analyser: AnalyserNode;\n  public recordedChunks = [];\n  // @ts-ignore\n  public mediaRecorder: MediaRecorder;\n  public busy$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public recordedAudioUrl$: BehaviorSubject<string> = new BehaviorSubject<string>(null);\n  constructor() {}\n  private createAnalyser(stream: MediaStream) {\n    const audioContext = new AudioContext();\n    const audioStream = audioContext.createMediaStreamSource(stream);\n    const analyser = audioContext.createAnalyser();\n    audioStream.connect(analyser);\n    analyser.fftSize = 1024;\n    this.analyser = analyser;\n  }\n  getAnalyser(): AnalyserNode {\n    return this.analyser;\n  }\n  startRecording(stream: MediaStream) {\n    const options = { mimeType: 'audio/webm'};\n    this.recordedChunks = [];\n    // @ts-ignore\n    this.mediaRecorder = new MediaRecorder(stream, options);\n    this.mediaRecorder.addEventListener('dataavailable', event => {\n      if (event.data.size > 0) {\n        this.recordedChunks.push(event.data);\n      }\n    });\n    this.mediaRecorder.addEventListener('stop', this.afterMediaRecorderStop.bind(this));\n    this.createAnalyser(stream);\n    this.mediaRecorder.start();\n    this.busy$.next(true);\n  }\n  stopRecording() {\n    this.mediaRecorder.stop();\n  }\n  afterMediaRecorderStop(){\n    const recordedAudioBlob = new Blob(this.recordedChunks);\n    const audioUrl = URL.createObjectURL(recordedAudioBlob);\n    this.busy$.next(false);\n    this.recordedAudioUrl$.next(audioUrl);\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}